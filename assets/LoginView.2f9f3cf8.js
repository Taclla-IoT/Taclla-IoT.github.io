import{A as w}from"./AlertMessage.aa263172.js";import{_ as y,r as _,o as r,c as n,b as o,a as v,t as u,f as b,F as h,g as f,e as p}from"./index.f395b829.js";const k="https://api-iot-new.tacllav2.com/",x={props:["token","user","hasPermission","updateToken"],data(){return{moduleName:"login",title:"Inicio de sesi\xF3n",Model:class{constructor(s){this.username=s.username,this.password=s.password}},fields:[{name:"username",type:"email",placeholder:"Usuario",required:!0,validation:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,message:"El campo de usuario no tiene el formato de correo."},{name:"password",type:"password",placeholder:"Contrase\xF1a",required:!0,message:"La contrase\xF1a debe contener una may\xFAscula, un n\xFAmero y un caracter especial, adem\xE1s de una longitud de 8 caracteres."},{name:"submit",type:"submit",placeholder:"Iniciar sesi\xF3n"},{name:"version",type:"view",placeholder:"Versi\xF3n 1.0.230227"}]}},created(){this.model=new this.Model({})},methods:{showMessage(e,s){this.$refs.AlertMessage.show(e,s)},showPassword(){var e=document.getElementById("password");e.type==="password"?e.type="text":e.type="password"},update(e,s,i){let c=!1,l="rounded border border-dark p-1";this.fields[e].validation&&(c=!String(i.value).toLowerCase().match(this.fields[e].validation)),c?l="rounded border border-danger p-1":l="rounded border border-success p-1",c&&this.showMessage(this.fields[e].message,"warning"),this.model[s]=i.value,i.className=l},async login(){try{const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.model)},i=await(await fetch(k+this.moduleName,e)).json();this.updateToken(i),this.$router.push("/decisions")}catch(e){console.log(e),this.showMessage("Las contrase\xF1as no coiciden con las guardadas.","error")}}},components:{AlertMessage:w}},M=o("img",{src:"https://www.worldenergytrade.com/images/stories/news/energias_alternativas/agua/14316/inversiones-energia-hidroelectrica-dispararan-llevaran-capacidad-mundial-mas-1200gw-14316.jpg",alt:"Background",id:"background",class:"m-0 p-0 opacity-50"},null,-1),A={class:"row pt-3 w-100"},C={class:"col-auto mx-auto"},S={class:"card text-center m-5 p-5 bg-light"},L={class:"card-title px-3 py-3 w-100"},N=o("img",{src:"https://sp-ao.shortpixel.ai/client/to_webp,q_lossless,ret_img,w_218,h_61/https://www.taclla.com/wp-content/uploads/2021/05/logo_1.png",height:"64",class:"mx-auto mb-3 my-3"},null,-1),P=o("img",{src:"https://www.chec.com.co/Portals/_default/Skins/Chec.Extranet.Skin.Koala/assets/img/LogoEpm.svg",height:"48",class:"mx-auto mb-3 my-3"},null,-1),B={id:"moduleTitle",class:"mt-3"},V={class:"card-body"},E=["type","placeholder","value","id","onInput"],I={key:3,class:"text-muted"};function T(e,s,i,c,l,a){const g=_("AlertMessage");return r(),n(h,null,[M,o("div",A,[v(g,{ref:"AlertMessage",class:"row pt-1"},null,512),o("div",C,[o("div",S,[o("div",L,[N,P,o("h3",B,u(l.title),1)]),o("div",V,[o("form",{onSubmit:s[2]||(s[2]=b((...t)=>a.login&&a.login(...t),["prevent"]))},[(r(!0),n(h,null,f(l.fields,(t,m)=>(r(),n("div",{key:m,class:"form-group py-3"},[t.type!="view"&&t.type!="submit"?(r(),n("input",{key:0,type:t.type,placeholder:t.placeholder,value:t.value,id:t.name,onInput:d=>a.update(m,t.name,d.target),class:"rounded border border-dark p-1"},null,40,E)):p("",!0),t.type=="password"?(r(),n("i",{key:1,class:"fa-solid fa-eye position-absolute",id:"togglePassword",onClick:s[0]||(s[0]=(...d)=>a.showPassword&&a.showPassword(...d)),style:{"margin-left":"-20px","margin-top":"7px",cursor:"pointer"}})):p("",!0),t.type=="submit"?(r(),n("button",{key:2,type:"button",onClick:s[1]||(s[1]=(...d)=>a.login&&a.login(...d)),class:"btn text-light",style:{background:"#00782B"}},u(t.placeholder),1)):p("",!0),t.type=="view"?(r(),n("p",I,u(t.placeholder),1)):p("",!0)]))),128))],32)])])])])],64)}const F=y(x,[["render",T]]);export{F as default};
