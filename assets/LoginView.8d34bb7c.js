import{A as w}from"./AlertMessage.1bbb915a.js";import{_,r as y,o as r,c as n,e as o,a as b,t as u,w as v,F as h,f,d as p}from"./index.0cc7c20d.js";const k="https://api-iot-new.tacllav2.com/",x={props:["token","user","hasPermission","updateToken"],data(){return{moduleName:"login",title:"Inicio de sesi\xF3n",Model:class{constructor(s){this.username=s.username,this.password=s.password}},fields:[{name:"username",type:"email",placeholder:"Usuario",required:!0,validation:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,message:"El campo de usuario no tiene el formato de correo."},{name:"password",type:"password",placeholder:"Contrase\xF1a",required:!0,message:"La contrase\xF1a debe contener una may\xFAscula, un n\xFAmero y un caracter especial, adem\xE1s de una longitud de 8 caracteres."},{name:"submit",type:"submit",placeholder:"Iniciar sesi\xF3n"},{name:"version",type:"view",placeholder:"Versi\xF3n 1.0.230426"}]}},created(){this.model=new this.Model({})},methods:{showMessage(e,s){this.$refs.AlertMessage.show(e,s)},showPassword(){var e=document.getElementById("password");e.type==="password"?e.type="text":e.type="password"},update(e,s,l){let c=!1,i="rounded border border-dark p-1";this.fields[e].validation&&(c=!String(l.value).toLowerCase().match(this.fields[e].validation)),c?i="rounded border border-danger p-1":i="rounded border border-success p-1",c&&this.showMessage(this.fields[e].message,"warning"),this.model[s]=l.value,l.className=i},async login(){try{const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.model)},l=await(await fetch(k+this.moduleName,e)).json();this.updateToken(l),this.$router.push("/maps")}catch(e){console.log(e),this.showMessage("Las contrase\xF1as no coiciden con las guardadas.","error")}}},components:{AlertMessage:w}},M=o("img",{src:"https://www.chec.com.co/Portals/9/EasyDNNRotator/16498/thumb/thumb_dvq1g3ah.jpg",alt:"Background",id:"background",class:"m-0 p-0 opacity-75"},null,-1),N={class:"row pt-3 w-100"},A={class:"col-auto mx-auto"},C={class:"card text-center m-5 p-5 bg-light"},P={class:"card-title px-3 py-3 w-100"},S=o("img",{src:"https://sp-ao.shortpixel.ai/client/to_webp,q_lossless,ret_img,w_218,h_61/https://www.taclla.com/wp-content/uploads/2021/05/logo_1.png",height:"64",class:"mx-auto mb-3 my-3"},null,-1),L=o("br",null,null,-1),E=o("img",{src:"https://www.chec.com.co/Portals/_default/Skins/Chec.Extranet.Skin.Koala/assets/img/LogoEpm.svg",height:"48",class:"mx-auto mb-3 my-3"},null,-1),V={id:"moduleTitle",class:"mt-3"},B={class:"card-body"},I=["type","placeholder","value","id","onInput"],T={key:3,class:"text-muted"};function q(e,s,l,c,i,a){const g=y("AlertMessage");return r(),n(h,null,[M,o("div",N,[b(g,{ref:"AlertMessage",class:"row pt-1"},null,512),o("div",A,[o("div",C,[o("div",P,[S,L,E,o("h3",V,u(i.title),1)]),o("div",B,[o("form",{onSubmit:s[2]||(s[2]=v((...t)=>a.login&&a.login(...t),["prevent"]))},[(r(!0),n(h,null,f(i.fields,(t,m)=>(r(),n("div",{key:m,class:"form-group py-3"},[t.type!="view"&&t.type!="submit"?(r(),n("input",{key:0,type:t.type,placeholder:t.placeholder,value:t.value,id:t.name,onInput:d=>a.update(m,t.name,d.target),class:"rounded border border-dark p-1"},null,40,I)):p("",!0),t.type=="password"?(r(),n("i",{key:1,class:"fa-solid fa-eye position-absolute",id:"togglePassword",onClick:s[0]||(s[0]=(...d)=>a.showPassword&&a.showPassword(...d)),style:{"margin-left":"-20px","margin-top":"7px",cursor:"pointer"}})):p("",!0),t.type=="submit"?(r(),n("button",{key:2,type:"button",onClick:s[1]||(s[1]=(...d)=>a.login&&a.login(...d)),class:"btn text-light",style:{background:"rgb(35, 176, 144)"}},u(t.placeholder),1)):p("",!0),t.type=="view"?(r(),n("p",T,u(t.placeholder),1)):p("",!0)]))),128))],32)])])])])],64)}const F=_(x,[["render",q]]);export{F as default};
